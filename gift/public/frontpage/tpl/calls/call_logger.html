<style>
  .total_count {
      background-color: #2c3e50;
      margin-bottom: 0px;
      border-radius: 6px;
  }
</style>
<script type="text/ng-template" id="agent_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<li ng-repeat="agent in agentlist"  style="margin-top: 2px">
				<label class="md-check" style="margin-left: 20px">
					<input type="checkbox"
						   ng-model="agent_filter[agent.id]"
						   ng-click="onChangeAgentlist(agent)">
					<i class="green"></i>
					{{agent.label}}
				</label>
			</li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="type_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<li ng-repeat="type in typelist"  style="margin-top: 2px">
				<label class="md-check" style="margin-left: 20px">
					<input type="checkbox"
						   ng-model="type_filter[type.id]"
						   ng-click="onChangeTypelist(type)">
					<i class="green"></i>
					{{type.label}}
				</label>
			</li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="duration_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<select class='form-control' ng-model="call_duration" style="display: inline;width:45px;" ng-change="onChangeReportType()" ng-options="type for type in durationlist">
			</select>
			<input type="number" maxlength="3"
				   ng-model="call_duration_time"
				   ng-keypress="onChangeDurationlist($event , call_duration, call_duration_time)"
				   style="width: 83px;display: inline;"
				   class="form-control input-sm" >
		</ul>
	</div>
</script>

<script type="text/ng-template" id="tta_list.html">
	<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close="disabled">
		<ul class="headfilter" role="menu" style="list-style: none; margin-left:-50px;">
			<select class='form-control' ng-model="tta" style="display: inline;width:45px;" ng-change="onChangeReportType()" ng-options="type for type in durationlist">
			</select>
			<input type="number" maxlength="3"
				   ng-model="tta_time"
				   ng-keypress="onChangeTTAlist($event , tta, tta_time)"
				   style="width: 83px;display: inline;"
				   class="form-control input-sm">
		</ul>
	</div>
</script>

<div ng-controller="LoggerController" style="{{full_height}}; overflow-y: hidden">
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - HEADER - - - - - - - - - - - - - - - - - - - - - - - -->
	<div class="wrapper bg-light lt">
    	<div class="col-sm-6 col-xs-12">
				<h1 class="m-n font-thin h3 text-black" style="color:#337ab7">
					<label style="font-size: 1.5vw"><i class="glyphicon glyphicon-list-alt"></i>
						&nbsp;&nbsp;Call Logger
					</label>
				</h1>
    	</div>
			<div class="col-sm-6 input-group text-right">
	    	<!--
	    	<div class="btn-group">
	        	<a ng-click="onDownloadPDF()">
		        <i class="fa fa-file-pdf-o" style="font-size: 30px; color:red" aria-hidden="true"></i></a>&nbsp;&nbsp;&nbsp;&nbsp;
		  	</div>
		  	--><!-- Dummy Need to add logic to export dash to pdf -->
		  	<div class="btn-group">
		        <label class="btn btn-info btn-sm" ng-model="dateFilter" uib-btn-radio="'Today'">Today</label>
		        <label class="btn btn-info btn-sm" ng-model="dateFilter" uib-btn-radio="'Weekly'">Weekly</label>
		        <label class="btn btn-info btn-sm" ng-model="dateFilter" uib-btn-radio="'Monthly'">Monthly</label>
		        <label class="btn btn-info btn-sm" ng-model="dateFilter" uib-btn-radio="'Yearly'">Yearly</label>
		        <label class="btn btn-info btn-sm" ng-model="dateFilter" uib-btn-radio="'Custom Days'">Custom Days</label>
      	</div>
	  		<input style="width: 200px; margin-left: 10px" ng-disabled="dateFilter != 'Custom Days'"
	  			ng-model="daterange" ui-jq="daterangepicker" ui-options="dateRangeOption" class="form-control pull-right input-sm">
    	</div>
	</div>
	<!-- - - - - - - - - - - - - - - - - - - - - - - END OF HEADER - - - - - - - - - - - - - - - - - - - - - - -->
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - STATISTICS - - - - - - - - - - - - - - - - - - - - - - - -->
	<div class="row col-md-12 text-center wrapper" style="overflow-y: hidden; padding-left: 25px">
		<div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Answered')">
	    	<span class="text-success font-thin h3 block ">{{total_answered_count}}</span>  <!-- Dummy Need to have Actual count -->
	    	<span class="text-muted text-xs">Answered</span>
	    </a>
	  </div>
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Abandoned')">
	      <span class="text-danger font-thin h3 block">{{total_abandoned_count}}</span> <!-- Dummy Need to have Actual count -->
	      <span class="text-muted text-xs">Abandoned</span>
	    </a>
	  </div>
	  <!--
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Queue')">
	      <span class="text-warning font-thin h3 block">{{total_queue_count}}</span>
	      <span class="text-muted text-xs">Queue</span>
	    </a>
	  </div>
	  -->
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Missed')">
	      <span class="font-thin h3 block" style="color: #FF9800">{{total_missed_count}}</span> <!-- Dummy Need to have Actual count -->
	      <span class="text-muted text-xs">Missed</span>
	    </a>
	  </div>
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"   ng-click="onFilter('Follow')" >
	      <span class="text-warning font-thin h3 block">{{total_follow_count}}</span> <!-- Dummy Need to have Actual count -->
	      <span class="text-muted text-xs">Modify</span>
	    </a>
	  </div>
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Callback')" >
	      <span class="font-thin h3 block" style="color: #FFA726">{{total_callback_count}}</span> <!-- Dummy Need to have Actual count -->
	      <span class="text-muted text-xs">Callback</span>
	    </a>
	  </div>
	  <div class="col-md-2">
	    <a href class="block panel padder-v item card bg-dark total_count"  ng-click="onFilter('Total')">
	      <span class="text-info font-thin h3 block">{{total_count}}</span> <!-- Dummy Need to have Actual count -->
	      <span class="text-muted text-xs">All</span>
	    </a>
	  </div>
	</div>
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - END OF STATISTICS - - - - - - - - - - - - - - - - - - - - - - - -->
	
	<div class="hbox">
		
		<div class="col b-r" style="width: 50%; position: fixed">
	    <!-- header -->
	    <div class="wrapper bg-light lter b-b" >
	      <div class="btn-group pull-right">
	        <button type="button" class="btn btn-sm btn-bg btn-default">
	          {{paginationOptions.numberOfPages}}/{{paginationOptions.countOfPages}} - {{paginationOptions.totalItems}} Items
	        </button>
	        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onPrevPage()" ng-disabled="paginationOptions.numberOfPages <= 1">
	        	<i class="fa fa-chevron-left"></i>
	        </button>
	        <button type="button" class="btn btn-sm btn-bg btn-default" ng-click="onNextPage()"
	        	ng-disabled="paginationOptions.numberOfPages >= paginationOptions.countOfPages">
	        	<i class="fa fa-chevron-right"></i>
	        </button>
	      </div>
	      
	      <div class="btn-toolbar" style="padding-left: 11px">
	        <div class="btn-group">
	          <button class="btn btn-sm btn-bg btn-default" data-toggle="tooltip" data-placement="bottom"
	          	data-title="Refresh" data-original-title="" title="" ng-click="refreshLogs()">
	          	<i class="fa fa-refresh"></i>
	          </button>
	        </div>
			  <div class="input-group col-md-2 pull-left">
				  <input type="text" ng-model="searchtext" ng-keyup="onSearch()" class="form-control input-sm bg-light no-border rounded padder" placeholder="Search">
				  <span class="input-group-btn">
					<button type="submit" class="btn btn-sm bg-light rounded"><i class="fa fa-search"></i></button>
				  </span>
			  </div>
	      </div>
	    </div>
	
	    <!-- / header -->
	    <!-- / list -->
	    <!-- Grid Table -->
	    <!-- BEGIN SAMPLE TABLE PORTLET-->
	    <div class="portlet" style="width: 100%">
	      <div class="portlet-body" style="overflow-y: auto">
	        <div class="table table-responsive" style="{{grid_height}}">
	          <table  st-table="guestlist"  st-pipe="getDataList" class="table ticket table-striped b-t b-light">
	            <thead class="tblhead-sm" style="font-size: .8vw; height: 30px">
	            <tr>
	              <th class="text-center" st-sort="id" st-sort-default="reverse" style="white-space: nowrap">
		              <b>&nbsp;Ref. No</b></th>
	              <th class="text-center" style="white-space: nowrap">
									<a>&nbsp;&nbsp;Agent&nbsp;</a>&nbsp;
									<b class="fa fa-fw fa-filter" uib-popover-template="'agent_list.html'"
									popover-trigger="outsideClick" popover-placement="bottom"></b>
				  			</th>
					<th class="text-center" st-sort="callerid" style="white-space: nowrap"><b>Caller ID</b></th>
					<th class="text-center" style="white-space: nowrap"><b>Origin</b>
					<!--
					<th class="text-center" st-sort="type"><b>Origin</b>
		            	<b class="fa fa-filter" uib-popover-template="'__'"
									popover-trigger="outsideClick" popover-placement="bottom"></b>
	              </th>-->
	              <th class="text-center" st-sort="start_date_time" style="white-space: nowrap"><b>Time</b></th>
	              <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;Type&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'type_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>
	              <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;Duration&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'duration_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>
				  <!--
	              <th class="text-center" st-sort="status" style="white-space: nowrap"><b>Caller</b></th>
	              -->
	              <th class="text-center" style="white-space: nowrap">
					  <a>&nbsp;&nbsp;TTA&nbsp;</a>&nbsp;
					  <b class="fa fa-fw fa-filter" uib-popover-template="'tta_list.html'" popover-trigger="outsideClick" popover-placement="bottom"></b>
				  </th>

	              <!--<th st-sort="ivr_code"><b>Action</b></th>-->
	            </tr>
	            </thead>
	            <tbody ng-hide="isLoading" style="font-size: .8vw">
	              <tr class="{{getRowCss(row)}}; text-center" ng-click="onSelectLog(row, $index)" ng-repeat="row in datalist " style="cursor:pointer;">
	                <td>{{row.id}}</td>
	                <td>{{row.wholename}}</td>
	                <td>{{row.callerid}}</td>
	                <td>{{row.call_origin > 0 ? row.country : 'Internal'}}</td>
	                <td style="font-size: .7vw">{{row.start_date_time | mydatetime}}</td>
	                <td>{{row.type}}</td>
	                <td ng-click="onSelectLog(row, $index)">{{row.duration}}</td>
	                <!--
	                <td>{{row.caller_name}}</td>
	                -->
	                <td>{{row.time_to_answer}}</td>
	                <!--<td>
	                  <a class="btn default btn-xs green" ng-click="completeTicket(row)">
	                    <i class="fa fa-thumbs-o-up"></i></a>
	                  <a class="btn default btn-xs red" ng-click="cancelTicket(row)">
	                    <i class="fa fa-ban"></i></a>
	                </td>-->
	              </tr>
	            </tbody>
	            <tbody ng-show="isLoading">
	            <tr>
	              <td colspan="9" class="text-center"><i class="fa fa-spin fa-refresh"></i></td>
	            </tr>
	            </tbody>
	            <tfoot ng-hide="true">
	            <tr ng-show="paginationOptions.totalItems > paginationOptions.pageSize">
	              <td colspan="9" class="text-center">
	                <div st-pagination="" st-items-by-page="paginationOptions.pageSize" st-displayed-pages="7" class="no-margin"></div>
	              </td>
	            </tr>
	            </tfoot>
	          </table>
	        </div>
	      </div>
	    </div>
	    <!-- / Grid Table -->
		</div>
	
	  <div class="row" style="position: fixed;	width: 48%; overflow-y: auto;height: 100vh; padding-bottom: 50px; margin-left: 50%">
	    	<div style="opacity: 0.5;">
	        <img style="margin-top:50px" class="img-full" ng-show="selectedLogs.length < 1" src="img/hotlync_.png"  alt="">
	      </div>
	      
	      <uib-tabset active="active" ng-show="selectedLogs.length > 0">
	        <uib-tab ng-repeat="tab in selectedLogs" active="tab.active" index="tab.id" disabled="tab.disabled">
	          <uib-tab-heading>
	            <uib-tab-heading><b style="color:#2691d9">{{getLogNumber(tab)}}</b>
	              <span ng-click="removeSelectLog(tab, $index)"><i class="fa fa-times" style="color:#FF0000"></i></span>
	            </uib-tab-heading>
	          </uib-tab-heading>
						
	          <div ng-include="'tpl/calls/log_detail.html'" style="width: 98%" ng-controller="LogdetailController" ng-init="init(tab)">
	          </div>
	        </uib-tab>
	      </uib-tabset>
	    
	  </div>
	</div>
</div>