<div ng-controller="HskpReportController">
    <style>
        .datetime .popover {
            max-width: 650px;
        }
    </style>
    <script type="text/ng-template" id="datetime_ranger.html">
        <div style="width: 700px">
            <div rg-range-picker="myDatetimeRange" labels="myDatetimeLabels"></div>
        </div>
    </script>

    <div class="wrapper-md1">
        <div class="col-lg-12 col-centered">
            <div class="panel panel-default">
                <div class="panel-heading font-bold"><i class="fa fa-cog"></i>&nbsp;&nbsp;Configure Report
					<div class="pull-right"><i class="fa fa-save"></i>&nbsp;&nbsp;Save & Schedule Report
					</div>
				</div>
                <div class="panel-body" ng-show="!isHidden">
                    <form class="form-horizontal form-validation">
                        <div class="form-group">
                            <label class="col-sm-1 control-label">Report Type</label>
                            <div class="col-sm-2">
                                <select class='form-control input-sm m-b' ng-model="report_type" ng-change="onChangeReportType()"
                                        ng-options="type for type in reporttypes">
                                </select>
                            </div>
                            <label class="col-sm-1 control-label">Report By</label>
                            <div class="col-sm-2">
                                <select class="form-control input-sm m-b" ng-model="report_by" ng-change="onChangeReportBy()"
                                        ng-options="type for type in reportby_list" >
                                </select>
                            </div>
                            <div class="col-sm-3" ng-show="report_by != 'Date'">
                                <tags-input ng-model="report_tags" placeholder="Add a filter" style="margin-top: -7px"
                                            replace-spaces-with-dashes="false">
                                    <auto-complete source="loadFilters($query)"
                                                   min-length="0"
                                                   debounce-delay="0"
                                                   load-on-focus="true"
                                                   load-on-empty="true"
                                                   max-results-to-show="1000" ></auto-complete>
                                </tags-input>
                            </div>
                            <div class="datetime col-sm-2" ng-show="report_by == 'Date'" >
                                <input type="text" size="8" class="form-control input-sm" ng-model="time_range" uib-popover-template="'datetime_ranger.html'" popover-trigger="outsideClick" popover-placement="bottom">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="pull-right">
                                <a href="/frontend/report/minibar_pdfreport?{{param}}"><i class="fa fa-file-pdf-o" style="font-size: 30px;" aria-hidden="true"></i></a>
                                <a href="/frontend/report/minibar_excelreport?{{param}}"><i class="fa fa-file-excel-o" style="font-size: 30px; margin-left: 20px; margin-right: 10px" aria-hidden="true"></i></a>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="pull-right" style="margin-right: 20px">
                                <button type="submit" class="btn btn-primary" ng-click="onGenerateReport()">Generate Report</button>
                                <button type="submit" class="btn btn-default">Cancel</button>
                            </div>
                        </div>
						<div class="line line-dashed b-b line-lg pull-in"></div>
                    </form>
                </div>

                <div  class="panel-default col-md-offset-5"  ng-click="onGetFrameHeight()" >
                    <span class="glyphicon" ng-class="isHidden ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'" ></span>
                    <label style="cursor: pointer" ng-show="isHidden" ng-click="isHidden = !isHidden;"> Show Filters </label>
                    <label style="cursor: pointer" ng-show="!isHidden" ng-click="isHidden = !isHidden;"> Hide Filters </label>
                    <span class="glyphicon" ng-class="isHidden ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'" ></span>
                </div>

				<div class="panel-default">&nbsp;&nbsp;&nbsp;&nbsp;<i class="icon-screen-desktop"></i>&nbsp;&nbsp;Preview
				<div class="panel panel-default">
					<div style="{{iframe_style}}">
						<iframe src="{{param}}" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100%" width="100%">
							<p>Your browser does not support iframes.</p>
						</iframe>
					</div>
				</div>
				</div>
            </div>
        
			
		</div>

    <!--    <div class="panel panel-default">
            <div class="panel-heading">Preview</div>
            <div style="margin:0px;padding:0px;overflow:hidden; height:700px">
                <iframe src="{{param}}" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100%" width="100%">
                    <p>Your browser does not support iframes.</p>
                </iframe>
            </div>
        </div> -->
    </div>
</div>
