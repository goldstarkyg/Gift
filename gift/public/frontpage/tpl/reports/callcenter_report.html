<div ng-controller="CallcenterReportController">
    <style>
        .datetime .popover {
            max-width: 650px;
        }
    </style>
    <script type="text/ng-template" id="datetime_ranger.html">
        <div style="width: 700px">
            <div rg-range-picker="myDatetimeRange" labels="myDatetimeLabels"></div>
        </div>
    </script>
        <div class="col-lg-12 col-centered">
            <div class="panel-default">
                <div class="panel-body form-horizontal" ng-show="!isHidden" style="width:100%; margin: auto;">
					<div class="row form-group" style="width:100%; margin:auto;">
						<div class="form-horizontal form-validation" style="float:left; width:100%; height:20%; display:inline-block;">
							<fieldset class="fieldset1">
							<legend><h5><i class="fa fa-columns"></i>&nbsp;&nbsp;Grouping</h5></legend>
							<div class="sfield1">
								<div class="row form-horizontal" style="margin-bottom:3px;">
									<label class="col-sm-5 control-label" style="white-space: nowrap;">Report Type : </label>
									<div class="col-sm-7">
										<select class='form-control' ng-model="report_type" ng-change="onChangeReportType()" ng-options="type for type in reporttypes">
										</select>
									</div>
								</div>
								<div class="row form-horizontal" style="margin-bottom:3px;">
									<label class="col-sm-5 control-label" style="white-space: nowrap;">Report By :</label>
									<div class="col-sm-7">
										<select class='form-control' ng-model="report_by" ng-change="onChangeReportBy()" ng-options="type for type in reportby_list">
										</select>
									</div>
								</div>
								<div class="row form-horizontal">
                                    <label class="col-sm-5 control-label" style="white-space: nowrap;">Chart Graph : </label>
                                    <div class="col-md-7">                                        
                                        <label class="i-switch m-t-xs m-r">
                                            <input type="checkbox" ng-model="chart_graph_flag">
                                            <i></i>
                                        </label>
                                    </div>
                                </div> 
							</div>
							</fieldset>
							
							<fieldset class="fieldset2"  >
							<legend><h5><i class="glyphicon glyphicon-filter"></i>&nbsp;&nbsp;Apply filters</h5></legend>
							<div class="sfield2">
								<div ng-show="valid_flag[0]" class="row form-horizontal" style="margin-bottom:3px; ">
									<label class="col-sm-3 control-label" style="white-space: nowrap;">Period : </label>
									<div class="datetime col-sm-8">
										<input type="text" size="4" class="form-control" ng-model="time_range" uib-popover-template="'datetime_ranger.html'" popover-trigger="outsideClick" popover-placement="bottom">
									</div>
								</div>
								<div class="row form-horizontal" style="margin-bottom:3px; ">
									<label class="col-sm-3 control-label" style="white-space: nowrap;">Agents : </label>
									<div class="col-md-9">
										<div ng-dropdown-multiselect="" options="agentlist" selected-model="agent_ids" checkboxes="true" extra-settings="agentlist_hint_setting" translation-texts="agentlist_hint"></div>
									</div>
								</div>
								<div class="row form-horizontal">
									<label class="col-sm-3 control-label" style="white-space: nowrap;">Origin : </label>
									<div class="col-md-9">
										<tags-input ng-model="origin_tags" placeholder="Add Origin" replace-spaces-with-dashes="false" style="margin-top: -5px">
											<auto-complete source="loadFilters($query, 'origin')"
											  min-length="0"
												debounce-delay="0"
												load-on-focus="true"
												load-on-empty="true"
												max-results-to-show="100">
											</auto-complete>
										</tags-input>
									</div>
								</div>
								<div class="row form-horizontal" style="margin-bottom:3px; ">
									<label class="col-sm-3 control-label" style="white-space: nowrap;">Call Type : </label>
									<div class="col-md-9">
										<div ng-dropdown-multiselect="" options="call_types" selected-model="call_type_ids" checkboxes="true" extra-settings="call_type_hint_setting" translation-texts="call_type_hint"></div>
									</div>
								</div>
								<div class="row form-horizontal" style="margin-bottom:3px; ">
									<label class="col-sm-3 control-label" style="white-space: nowrap;">Modify : </label>
									<div class="col-md-3">
										<select class='form-control' ng-model="follow_up" ng-change="onChangeReportType()" ng-options="type for type in follow_ups">
										</select>
									</div>

									<label class="col-sm-3 control-label" style="white-space: nowrap;">Status : </label>
									<div class="col-md-3">
										<select class='form-control' ng-model="status" ng-change="onChangeReportType()" ng-options="type for type in statuses">
											</select>
									</div>
								</div>
							</div>

							<div class="sfield3" >
									<!--
									<div class="row form-horizontal" style="margin-bottom: 5px">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Caller Id : </label>
										<div class="col-md-9">
											<input type="number" maxlength="11" class="form-control input-sm" ng-model="caller_id" />
										</div>
									</div>
									<div class="row form-horizontal">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Origin : </label>
										<div class="col-md-9">
											<tags-input ng-model="origin_tags" placeholder="Add Origin" replace-spaces-with-dashes="false" style="margin-top: -5px">
												<auto-complete source="loadFilters($query, 'origin')"
															   min-length="0"
															   debounce-delay="0"
															   load-on-focus="true"
															   load-on-empty="true"
															   max-results-to-show="100" ></auto-complete>
											</tags-input>
										</div>
									</div>
									<div class="row form-horizontal" style="margin-bottom:3px; ">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Call Type : </label>
										<div class="col-md-9">
											<div ng-dropdown-multiselect="" options="call_types" selected-model="call_type_ids" checkboxes="true" extra-settings="call_type_hint_setting" translation-texts="call_type_hint"></div>
										</div>
									</div>
									<div class="row form-horizontal" style="margin-bottom:3px; ">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Modify : </label>
										<div class="col-md-3">
											<select class='form-control' ng-model="follow_up" ng-change="onChangeReportType()" ng-options="type for type in follow_ups">
											</select>
										</div>

										<label class="col-sm-3 control-label" style="white-space: nowrap;">Status : </label>
										<div class="col-md-3">
											<select class='form-control' ng-model="status" ng-change="onChangeReportType()" ng-options="type for type in statuses">
												</select>
										</div>
									</div>
									-->
									<div class="row form-horizontal" style="margin-bottom:3px; ">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Call Time Start : </label>
										<div class="col-md-3">
											<input type="time"  placeholder="HH:mm:ss"  class="form-control input-sm"  ng-model="call_time_start"    />
										</div>
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Call Time End : </label>
										<div class="col-md-3">
											<input type="time"  class="form-control input-sm" ng-model="call_time_end" />
										</div>
									</div>
									<div class="row form-horizontal" style="margin-bottom:3px; ">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Call duration : </label>
										<div class="col-md-5">
											<select class="form-control" style="display: inline;width:45px;" ng-model="call_duration" ng-change="onChangeReportType()" ng-options="type for type in call_durations">
											</select>
											<input type="number" maxlength="3" style="width: 60px;display: inline;"  class="form-control input-sm" ng-model="call_duration_time" />
										</div>
									</div>
									<div class="row form-horizontal" style="margin-bottom:3px; ">
										<label class="col-sm-3 control-label" style="white-space: nowrap;">Time on Queue : </label>
										<div class="col-md-5">
											<select class="form-control" style="display: inline;width:45px;" ng-model="time_in_queue" ng-change="onChangeReportType()" ng-options="type for type in time_in_queues">
											</select>
											<input type="number" maxlength="3"  style="width: 60px;display: inline;"  class="form-control input-sm" ng-model="time_in_queue_time" />
										</div>
									</div>
							</div>
							</fieldset>
							<div class="searchbox">
								<div class="row form-horizontal" style="margin-bottom:3px;">
									<button type="submit" class="btn btn-info" ng-click="onGenerateReport()">
									<i class="fa fa-file-text"></i>&nbsp;&nbsp;Generate Report&nbsp;</button>
									<!-- <button type="submit" class="btn btn-default">Cancel</button> -->
								</div>
								<div class="row form-horizontal" style="margin-bottom:3px;">
									<button type="submit" class="btn btn-info" ng-if="auth_svc.isValidModule('app.reports.schedule')"  ng-click="onShowSchedule()">
										<i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;Schedule Report
									</button>
									<button type="submit" class="btn btn-info disabled" style="border:#a9a9a9;background-color:#a9a9a9"
										ng-if="!auth_svc.isValidModule('app.reports.schedule')">
										<i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;Schedule Report
									</button>
									<!-- <button type="submit" class="btn btn-default">Cancel</button> -->
								</div>
								
							</div>
						</div>
					</div>
        		</div>
        	
        	<div class="wrapper" style="background-color: #ECEFF1; height: 40px; margin: 0px -15px 0px -15px">
						<div class="col-md-4">
							<i class="icon-screen-desktop"></i>&nbsp;&nbsp;Preview
						</div>
						
						<div class="col-md-4 text-center" ng-click="onGetFrameHeight()">
							<span class="glyphicon" ng-class="isHidden ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'" ></span>
							  <label style="cursor: pointer" ng-show="isHidden" ng-click="isHidden = !isHidden;" > Show Filters </label>
							  <label style="cursor: pointer" ng-show="!isHidden" ng-click="isHidden = !isHidden;" > Hide Filters </label>
							<span class="glyphicon" ng-class="isHidden ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'" ></span>
						</div>
						
						<div class="col-md-4" style="text-align: right">	
							<!--<a href="/frontend/report/callaccount_pdfreport?{{param}}"><i class="fa fa-file-pdf-o" style="font-size: 30px;" aria-hidden="true"></i></a>-->
							<i class="fa fa-download" style="padding-bottom: 10px;"></i>&nbsp;&nbsp;Download : &nbsp;&nbsp;
							<a ng-click="onDownloadPDF()">
								<i class="fa fa-file-pdf-o" style="font-size: 18px; color:red; margin-right: 20px" aria-hidden="true"
									data-toggle="tooltip" title="Download in PDF format"></i>
							</a>
							<a ng-click="onDownloadExcel()">
								<i class="fa fa-file-excel-o" style="font-size: 18px; color:green; margin-right: 20px" aria-hidden="true"
									data-toggle="tooltip" title="Download in Excel format"></i>
							</a>
						</div>
					</div>
					<div class="form-horizontal" style="width:97%; margin: auto;">
					<div class="row">
						<div style="{{iframe_style}}">
							<iframe src="{{param}}" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100%" width="100%">
								<p>Your browser does not support iframes.</p>
							</iframe>
						</div>
					</div>
				</div>
			</div>
		</div>
    
</div>
